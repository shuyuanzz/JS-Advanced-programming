# learn-js

读书笔记
----

## 目录


*************
### <a href="#js 简介">一.简介</a>

### <a href="#HTML">二.在HTML中使用js</a>

### <a href="#基本概念">三.基本概念</a>

### <a href="#作用域和内存问题">四.作用域和内存问题</a>
### <a href="#引用类型">五.引用类型</a>
### <a href="#面向对象的程序设计">六.面向对象的程序设计</a>

### <a name="js 简介">一.简介</a>

#### js是一种专门为与网页交互而设计的一种语言，由以下三个不同部分组成：
1. ECMAScript，由 ECMA-262定义，提供核心语言功能。
2. DOM，提供访问和操作网页的基本接口。
3. BOM，提供与浏览器交互的方法和接口。    

### <a name="HTML">二.在HTML中使用js</a>

#### 2.1 <script> 元素

##### 属性:
1. async:可选。表示立即下载脚本，但补妨碍页面中的其他操作。
2. defer:可选。表示脚本可以延迟到文档解析再执行。**只对外部文件有效**。
3. src: 可选。包含要执行代码的外部文件。
4. type:可选 表示编写代码使用的脚本语言的内容类型。默认text/javascript。  

  **&emsp;无论如何包含代码，只要不存在defer和async属性，浏览器都会按照该元素再页面中的出现的先后顺序对他们依次进行解析。**  

  **&emsp;在现实当中，延迟脚本（标签里面的defer='defer'）不一定会按照顺序执行，也不一定会在DOMContenLoaded 事件触发之前执行，因此最好只包含一个延迟脚本。**  

  **&emsp;同样与defer类似，async属性只适用于外部脚本文件，并告诉浏览器立即下载文件，但与defer不同的是，有该标记的脚本并不保证按照他们指定的先后顺序执行。（目的是不让浏览器等待该脚本下载和执行，从而异步加载页面，和其它内容）**
#### 2.2 js引入外部文件的优点:
1. 可维护性。
2. 可缓存。
3. 适应未来。

### <a name="基本概念">三.基本概念</a>
##### 3.1 语法：
**&emsp;在函数中用（let,var,const）声明一个变量，当函数被调用时，就会创建该变量并且为其赋值，在此之后，这个变量又会立即被销毁。在非严格模式下可以直接省略操作符，在函数体内被调用时声明一个全局变量（严格模式下报错）**  

**&emsp;可以用一条语句定义多个变量，只要把每个变量用逗号分开即可（如下）**
```
var message = 'hi',
    shu = 'yuan',
    yuan = 123;
```
##### 3.2 数据类型
&emsp;EMCAScript有五种基本数据类型，分别为，undifined,null,string,boolean,number(ES6新增了一种类字符串类型Symbol),还有一种复杂的数据类型——object。

###### 3.2.1 typeof操作符
&emsp;其用来检测给定变量的数据类型，返回值为字符串：
1. 'undifined'————如果这个值未定义。
2. 'boolean'————如果这个值是布尔值。
3. 'string'————如果这个值是字符串。
4. 'number'————如果这个值是数值。
5. 'object'————如果这个值是对象或者是null。
6. 'function'————如果这个值是函数。  
**&emsp;typeof操作符虽然是一个操作符，其也可以类似函数一样的使用括号，但是不是必须的**  
**&emsp;`typeof null = 'object';`是因为特殊值null被认为是一个空对象的引用，因为函数相对于对象来说自身有一些特殊的属性，因此通过typeof操作符来区分函数和其它对象是有必要的。**  
###### 3.4.2 undifined
**&emsp;对未初始化的变量执行typeof会返回undifined，对未声明的变量执行该操作符也同样会返回undifined值（只有在这种情况和delete使用未声明，的变量才不会报错）**
###### 3.4.3 null
**&emsp;值唯一的两个数据类型：undifined、null。只要意在保存对象的变量还没有真正的保存对象，就应该明确的让该变量保存null值。这样不仅可以体现null作为空对象指针的惯例，也有助于进一步区分null和undifined。**
###### 3.4.4 boolean
数据类型|转换为true的值|转换为false的值
--|:--:|--:
Boolean|true|false
String|任意非空字符串|''
Number|任意非零数值|0和NAN
Object|任何对象|null
undifinde|不适用|undifined  
###### 3.4.5 Number  
**&emsp; 任何涉及NaN的操作都会返回NaN,NaN与任何值都不相等，包括其本身。**
###### 3.4.6 String
**&emsp; 转义字符，可以出现在字符串中的任何位置，而且将被作为一个字符来解析。**  
###### 3.4.7 Object
**&emsp; 在EMCAScript中Object类型是所有它的实例的基础，也就是说所有更具体的对象中，都会有Object类型所具有的任何属性和方法(如下)**  
1. constructor:保存着创建当前对象的函数(构造函数)，比如说:
```
var  o = new Object();
```  
构造函数就是 Object()。  

2. hasOwnProoerty(propertyName：string): 用于检查给定的属性是否在对象的实例中，接收一个类型为string的参数。
3. isPrototypeOf(object):用于检测传入对象是不是当前对象的原型。
4. propertyIsEnumberable(propertyName:string):用于检查给定的属性是否可以使用for-in来枚举。
5. toLocaleString():返回对象的字符串形式，与对象所执行环境的地区相对应。
6. toString():返回对象的字符串表示。
7. valueOf():返回对象的字符串，数值，或者布尔值表示，通常与toString()方法的返回值相同。
##### 3.3 操作符
###### 3.3.1 一元操作符（只能操作一个值）
**&emsp; 前置递增递减和后置递增递减的区别————前置是在语句被求值之前改变，而后置是在语句被求值之后改变。如下：**
```
var a = 1,b = 2;
var c = ++a + b;//4
var d = a + b ;//4
```
```
var a = 1,b = 2;
var c = a++ + b;//3
var d = a + b ;//4
```
###### 3.3.2 乘除操作符
**&emsp; Infinity与0相乘结果是NaN,Infinity/Infinity结果是NaN，0/0结果是NaN，非零有限数/0 结果是Infinity，或者-Infinity**
###### 3.3.3 加操作符
**&emsp;如果两个数都是字符串，则把两个字符串拼接起来，一个字符串一个数字，先把数字转换为字符串，然后将二者拼接起来。（注意加性操作符和一元加操作符的区别）**  
###### 3.3.4 关系操作符
**&emsp; 比较两个字符串是比较他们的字符编码如`'23' < '3'//true`,但是其中有一个是数字时，会进行转换。`'23'<2//false`NaN和任何值去比较返回的都是false。**

### <a name="作用域和内存问题">四.作用域和内存问题</a>

##### 4.1 基本类型和引用类型

###### 4.1.1基本类型和引用类型的区别：
1. 基本类型的值保存在栈中，当将一个基本类型变量赋值给另外一个变量时，会新开辟一个内存空间去保存这个值，从而改变其中一个变量的值的时候，另外一个不会改变。
2. 而引用类型的值保存在堆中，讲一个引用类型变量赋值给另外一个变量时，也会开辟一个空间去保存这个值所对应的指针，所以改变这个值的时候，另外一个也会改变。（两个指针指向的是同一个值，也就是引用的同一个地方）。  
###### 4.1.2 参数的传递
**&emsp; 参数的传递都是按照值类型来传递的（p70）**
###### 4.1.3 检测类型
1. 用typeof检测基本类型（因为引用类型检测出来都是object除了function）。
2. 用instaceof来检测引用类型（根据它的原形链来识别）`引用类型 instaceof Object //一直返回true`，值类型相反。

##### 4.2 执行环境和作用域
**&emsp; 某个执行环境中的所有代码执行完后，该环境被销毁，保存在其中的所有变量和函数定义都会被销毁，全局执行环境直到应用程序退出（例如关闭网页或者浏览器才会）**
##### 4.3 垃圾收集
**&emsp; 垃圾收集在浏览器中的实现具体有两个方策略：**
1. 标记清除。当一个变量在函数中声明 =》 将其标记为进入环境 =》 当垃圾收集器运行的时候 =》 它会去掉环境中的变量以及被环境中引用的变量的标记 =》 当改环境执行完后 =》 给这些变量标记为离开环境 =》 销毁这些被打上标记的变量，并且回收内存。
2. 引用计数。当一个值被一个变量引用时，该值的计数加一，当引用该值的变量取另外一个值时，该值的计数减一，到零就回收该变量。
**&emsp; 减少内存占用的一种方式，解除引用，将那些全局变量和全局对象的属性设置为null（确定他们的值不再被使用时），从而达到使其脱离执行环境的目的，以便垃圾收集器下次运行时将其回收。**

### <a name="引用类型">五.引用类型</a>

##### 5.1 Object类型
1. 数值属性名，会自动转化为字符串。
2. 除非必须使用变量来访问属性，否则一半都是用点表示法（另外一个是方括号表示法）。
##### 5.2 Array类型
1. 检测是不是数组对两种方法：arr instanceof Array 或者 arr.isArray()。
2. alert（） 要接收字符串参数，会在后台调用toString()转换。
##### 5.3 Function类型
1. 函数名称实际上是一个指向对象对指针。
2. 函数没有重载！
3. 解析器再向执行环境加载数据时，会率先读取函数声明，并且使其在执行任何代码之前可用，至于函数表达式，则必须等到解析器执行到它所在对带马行，才会真正被解释执行。
```
alert(sum(10,10))
function sum(a,b) {
  return a+b;
}//返回20
```
```
alert(sum(10,10))
sum = function (a,b) {
  return a+b;
}//报错
```
4. 函数内部属性，arguments对象和this对象。arguments属性自身含有一个叫做callee对属性，指向拥有这个arguments对象对函数。（p114具体作用）。
5. 函数的属性和方法：length 属性表示希望接受命名参数的个数.

### <a name="面向对象的程序设计">六.面向对象的程序设计</a>







